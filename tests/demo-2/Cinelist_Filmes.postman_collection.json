{
	"info": {
		"_postman_id": "028ed4a2-74d0-4285-b3b7-6be94dd15ad0",
		"name": "Cinelist - Filmes",
		"schema": "https://schema.getpostman.com/json/collection/v2.0.0/collection.json",
		"_exporter_id": "44926338",
		"_collection_link": "https://interstellar-satellite-9627242.postman.co/workspace/Marcus-Vin%C3%ADcius's-Workspace~855b6e5c-4ec4-416d-827e-181b42c7a1aa/collection/44926338-028ed4a2-74d0-4285-b3b7-6be94dd15ad0?action=share&source=collection_link&creator=44926338"
	},
	"item": [
		{
			"name": "Listar filmes",
			"event": [
				{
					"listen": "test",
					"script": {
						"exec": [
							"pm.test(\"Status code deve ser 200 (OK)\", function () {\r",
							"    pm.response.to.have.status(200);\r",
							"});\r",
							"\r",
							"pm.test(\"Resposta deve ser um array\", function () {\r",
							"    var jsonData = pm.response.json();\r",
							"    pm.expect(jsonData).to.be.an(\"array\");\r",
							"    pm.expect(jsonData.length).to.be.above(0); // deve ter pelo menos 1 item\r",
							"});\r",
							"\r",
							"pm.test(\"Itens do array devem ter os campos principais\", function () {\r",
							"    var jsonData = pm.response.json();\r",
							"    var movie = jsonData[0]; // valida o primeiro item\r",
							"\r",
							"    pm.expect(movie).to.have.property(\"id\");\r",
							"    pm.expect(movie).to.have.property(\"title\");\r",
							"    pm.expect(movie).to.have.property(\"original_title\");\r",
							"    pm.expect(movie).to.have.property(\"release_date\");\r",
							"    pm.expect(movie).to.have.property(\"vote_average\");\r",
							"    pm.expect(movie).to.have.property(\"genre_ids\");\r",
							"    pm.expect(movie.genre_ids).to.be.an(\"array\");\r",
							"});\r",
							"\r",
							"pm.test(\"Campos devem ter tipos corretos\", function () {\r",
							"    var jsonData = pm.response.json();\r",
							"    var movie = jsonData[0];\r",
							"\r",
							"    pm.expect(movie.id).to.be.a(\"number\");\r",
							"    pm.expect(movie.title).to.be.a(\"string\");\r",
							"    pm.expect(movie.original_language).to.be.a(\"string\");\r",
							"    pm.expect(movie.vote_average).to.be.a(\"number\");\r",
							"    pm.expect(movie.vote_count).to.be.a(\"number\");\r",
							"    pm.expect(movie.adult).to.be.a(\"boolean\");\r",
							"});\r",
							""
						],
						"type": "text/javascript",
						"packages": {}
					}
				}
			],
			"request": {
				"method": "GET",
				"header": [],
				"url": "http://localhost:8000/movies/"
			},
			"response": []
		},
		{
			"name": "Buscar por filme existente",
			"event": [
				{
					"listen": "test",
					"script": {
						"exec": [
							"pm.test(\"Status code deve ser 200 (OK)\", function () {\r",
							"    pm.response.to.have.status(200);\r",
							"});\r",
							"\r",
							"pm.test(\"Resposta deve ser um array\", function () {\r",
							"    var jsonData = pm.response.json();\r",
							"    pm.expect(jsonData).to.be.an(\"array\");\r",
							"    pm.expect(jsonData.length).to.be.above(0); // deve ter pelo menos 1 item\r",
							"});\r",
							"\r",
							"pm.test(\"Itens do array devem ter os campos principais\", function () {\r",
							"    var jsonData = pm.response.json();\r",
							"    var movie = jsonData[0]; // valida o primeiro item\r",
							"\r",
							"    pm.expect(movie).to.have.property(\"id\");\r",
							"    pm.expect(movie).to.have.property(\"title\");\r",
							"    pm.expect(movie).to.have.property(\"original_title\");\r",
							"    pm.expect(movie).to.have.property(\"release_date\");\r",
							"    pm.expect(movie).to.have.property(\"vote_average\");\r",
							"    pm.expect(movie).to.have.property(\"genre_ids\");\r",
							"    pm.expect(movie.genre_ids).to.be.an(\"array\");\r",
							"});\r",
							"\r",
							"pm.test(\"Campos devem ter tipos corretos\", function () {\r",
							"    var jsonData = pm.response.json();\r",
							"    var movie = jsonData[0];\r",
							"\r",
							"    pm.expect(movie.id).to.be.a(\"number\");\r",
							"    pm.expect(movie.title).to.be.a(\"string\");\r",
							"    pm.expect(movie.original_language).to.be.a(\"string\");\r",
							"    pm.expect(movie.vote_average).to.be.a(\"number\");\r",
							"    pm.expect(movie.vote_count).to.be.a(\"number\");\r",
							"    pm.expect(movie.adult).to.be.a(\"boolean\");\r",
							"});"
						],
						"type": "text/javascript",
						"packages": {}
					}
				}
			],
			"request": {
				"method": "GET",
				"header": [],
				"url": "http://localhost:8000/movies/search/{The Exorcist}"
			},
			"response": []
		},
		{
			"name": "Avaliando um filme",
			"event": [
				{
					"listen": "test",
					"script": {
						"exec": [
							"// Testa se o status da resposta é 200\r",
							"pm.test(\"Status deve ser 200\", function() {\r",
							"    pm.response.to.have.status(200);\r",
							"});\r",
							"\r",
							"// Testa se a resposta é um JSON\r",
							"pm.test(\"Resposta deve ser JSON\", function() {\r",
							"    pm.response.to.be.json;\r",
							"});\r",
							"\r",
							"// Testa se a mensagem retornada está correta\r",
							"pm.test(\"Mensagem correta\", function() {\r",
							"    var jsonData = pm.response.json();\r",
							"    pm.expect(jsonData.message).to.eql(\"movie avaliado\");\r",
							"});\r",
							"\r",
							"// Testa se o rating retornado está correto\r",
							"pm.test(\"Rating correto\", function() {\r",
							"    var jsonData = pm.response.json();\r",
							"    pm.expect(jsonData.rating).to.eql(9.0);\r",
							"});\r",
							""
						],
						"type": "text/javascript",
						"packages": {}
					}
				}
			],
			"request": {
				"method": "POST",
				"header": [],
				"url": {
					"raw": "http://localhost:8000/media/rate/movie/100?rating=9",
					"protocol": "http",
					"host": [
						"localhost"
					],
					"port": "8000",
					"path": [
						"media",
						"rate",
						"movie",
						"100"
					],
					"query": [
						{
							"key": "rating",
							"value": "9"
						}
					]
				}
			},
			"response": []
		},
		{
			"name": "Avaliando um filme já avaliado",
			"event": [
				{
					"listen": "test",
					"script": {
						"exec": [
							"pm.test(\"Status code deve ser 409 (Conflict)\", function () {\r",
							"    pm.response.to.have.status(409);\r",
							"});\r",
							"\r",
							"pm.test(\"Resposta contém detalhe do conflito\", function () {\r",
							"    var jsonData = pm.response.json();\r",
							"    pm.expect(jsonData).to.have.property(\"detail\");\r",
							"    pm.expect(jsonData.detail).to.include(\"já foi avaliado\");\r",
							"});\r",
							""
						],
						"type": "text/javascript",
						"packages": {}
					}
				}
			],
			"request": {
				"method": "POST",
				"header": [],
				"url": {
					"raw": "http://localhost:8000/media/rate/movie/99?rating=9",
					"protocol": "http",
					"host": [
						"localhost"
					],
					"port": "8000",
					"path": [
						"media",
						"rate",
						"movie",
						"99"
					],
					"query": [
						{
							"key": "rating",
							"value": "9"
						}
					]
				}
			},
			"response": []
		},
		{
			"name": "Avaliando filme com nota inválida",
			"event": [
				{
					"listen": "test",
					"script": {
						"exec": [
							"pm.test(\"Status code deve ser 400 (Bad Request)\", function () {\r",
							"    pm.response.to.have.status(400);\r",
							"});\r",
							"\r",
							"pm.test(\"Resposta contém detalhe do erro de validação\", function () {\r",
							"    var jsonData = pm.response.json();\r",
							"    pm.expect(jsonData).to.have.property(\"detail\");\r",
							"    pm.expect(jsonData.detail).to.eql(\"A nota deve estar entre 0 e 10.\");\r",
							"});"
						],
						"type": "text/javascript",
						"packages": {}
					}
				}
			],
			"request": {
				"method": "POST",
				"header": [],
				"url": {
					"raw": "http://localhost:8000/media/rate/movie/99?rating=-9",
					"protocol": "http",
					"host": [
						"localhost"
					],
					"port": "8000",
					"path": [
						"media",
						"rate",
						"movie",
						"99"
					],
					"query": [
						{
							"key": "rating",
							"value": "-9"
						}
					]
				}
			},
			"response": []
		},
		{
			"name": "Avaliando um filme com ID inválida",
			"event": [
				{
					"listen": "test",
					"script": {
						"exec": [
							"pm.test(\"Status code deve ser 422 (Unprocessable Entity)\", function () {\r",
							"    pm.response.to.have.status(422);\r",
							"});\r",
							"\r",
							"pm.test(\"Resposta contém detalhe de erro de parsing\", function () {\r",
							"    var jsonData = pm.response.json();\r",
							"\r",
							"    pm.expect(jsonData).to.have.property(\"detail\");\r",
							"    pm.expect(jsonData.detail[0]).to.have.property(\"type\", \"int_parsing\");\r",
							"    pm.expect(jsonData.detail[0]).to.have.property(\"loc\");\r",
							"    pm.expect(jsonData.detail[0].loc).to.include(\"path\");\r",
							"    pm.expect(jsonData.detail[0].loc).to.include(\"media_id\");\r",
							"    pm.expect(jsonData.detail[0]).to.have.property(\"msg\", \"Input should be a valid integer, unable to parse string as an integer\");\r",
							"    pm.expect(jsonData.detail[0]).to.have.property(\"input\", \"Q\");\r",
							"});\r",
							""
						],
						"type": "text/javascript",
						"packages": {}
					}
				}
			],
			"request": {
				"method": "POST",
				"header": [],
				"url": {
					"raw": "http://localhost:8000/media/rate/movie/Q?rating=9",
					"protocol": "http",
					"host": [
						"localhost"
					],
					"port": "8000",
					"path": [
						"media",
						"rate",
						"movie",
						"Q"
					],
					"query": [
						{
							"key": "rating",
							"value": "9"
						}
					]
				}
			},
			"response": []
		},
		{
			"name": "Atualizando avaliação de um filme",
			"event": [
				{
					"listen": "test",
					"script": {
						"exec": [
							"// Testa se o status da resposta é 200\r",
							"pm.test(\"Status deve ser 200\", function() {\r",
							"    pm.response.to.have.status(200);\r",
							"});\r",
							"\r",
							"// Testa se a resposta é um JSON\r",
							"pm.test(\"Resposta deve ser JSON\", function() {\r",
							"    pm.response.to.be.json;\r",
							"});\r",
							"\r",
							"// Testa se a mensagem retornada está correta\r",
							"pm.test(\"Mensagem correta\", function() {\r",
							"    var jsonData = pm.response.json();\r",
							"    pm.expect(jsonData.message).to.eql(\"Avaliação de movie atualizada\");\r",
							"});\r",
							"\r",
							"// Testa se o rating retornado está correto\r",
							"pm.test(\"Rating correto\", function() {\r",
							"    var jsonData = pm.response.json();\r",
							"    pm.expect(jsonData.rating).to.eql(10.0);\r",
							"});\r",
							""
						],
						"type": "text/javascript",
						"packages": {}
					}
				}
			],
			"request": {
				"method": "PUT",
				"header": [],
				"url": {
					"raw": "http://localhost:8000/media/rate/movie/99?rating=10",
					"protocol": "http",
					"host": [
						"localhost"
					],
					"port": "8000",
					"path": [
						"media",
						"rate",
						"movie",
						"99"
					],
					"query": [
						{
							"key": "rating",
							"value": "10"
						}
					]
				}
			},
			"response": []
		},
		{
			"name": "Atualizando nota inexistente de um filme",
			"event": [
				{
					"listen": "test",
					"script": {
						"exec": [
							"pm.test(\"Status deve ser 404\", function () {\r",
							"    pm.response.to.have.status(404);\r",
							"});\r",
							"\r",
							"pm.test(\"Resposta deve conter mensagem de erro correta\", function () {\r",
							"    var jsonData = pm.response.json();\r",
							"    pm.expect(jsonData).to.have.property(\"detail\", \"Movie não encontrado no banco de dados\");\r",
							"});\r",
							""
						],
						"type": "text/javascript",
						"packages": {}
					}
				}
			],
			"request": {
				"method": "PUT",
				"header": [],
				"url": {
					"raw": "http://localhost:8000/media/rate/movie/1?rating=10",
					"protocol": "http",
					"host": [
						"localhost"
					],
					"port": "8000",
					"path": [
						"media",
						"rate",
						"movie",
						"1"
					],
					"query": [
						{
							"key": "rating",
							"value": "10"
						}
					]
				}
			},
			"response": []
		},
		{
			"name": "Atualizando avaliação com nota inválida",
			"event": [
				{
					"listen": "test",
					"script": {
						"exec": [
							"pm.test(\"Status code deve ser 400 (Bad Request)\", function () {\r",
							"    pm.response.to.have.status(400);\r",
							"});\r",
							"\r",
							"pm.test(\"Resposta contém detalhe do erro de validação\", function () {\r",
							"    var jsonData = pm.response.json();\r",
							"    pm.expect(jsonData).to.have.property(\"detail\");\r",
							"    pm.expect(jsonData.detail).to.eql(\"A nota deve estar entre 0 e 10.\");\r",
							"});"
						],
						"type": "text/javascript",
						"packages": {}
					}
				}
			],
			"request": {
				"method": "PUT",
				"header": [],
				"url": {
					"raw": "http://localhost:8000/media/rate/movie/99?rating=100",
					"protocol": "http",
					"host": [
						"localhost"
					],
					"port": "8000",
					"path": [
						"media",
						"rate",
						"movie",
						"99"
					],
					"query": [
						{
							"key": "rating",
							"value": "100"
						}
					]
				}
			},
			"response": []
		},
		{
			"name": "Atualizando nota com ID inválida",
			"event": [
				{
					"listen": "test",
					"script": {
						"exec": [
							"pm.test(\"Status code deve ser 422 (Unprocessable Entity)\", function () {\r",
							"    pm.response.to.have.status(422);\r",
							"});\r",
							"\r",
							"pm.test(\"Resposta contém detalhe de erro de parsing\", function () {\r",
							"    var jsonData = pm.response.json();\r",
							"\r",
							"    pm.expect(jsonData).to.have.property(\"detail\");\r",
							"    pm.expect(jsonData.detail[0]).to.have.property(\"type\", \"int_parsing\");\r",
							"    pm.expect(jsonData.detail[0]).to.have.property(\"loc\");\r",
							"    pm.expect(jsonData.detail[0].loc).to.include(\"path\");\r",
							"    pm.expect(jsonData.detail[0].loc).to.include(\"media_id\");\r",
							"    pm.expect(jsonData.detail[0]).to.have.property(\"msg\", \"Input should be a valid integer, unable to parse string as an integer\");\r",
							"    pm.expect(jsonData.detail[0]).to.have.property(\"input\", \"Q\");\r",
							"});\r",
							""
						],
						"type": "text/javascript",
						"packages": {}
					}
				}
			],
			"request": {
				"method": "PUT",
				"header": [],
				"url": {
					"raw": "http://localhost:8000/media/rate/movie/Q?rating=10",
					"protocol": "http",
					"host": [
						"localhost"
					],
					"port": "8000",
					"path": [
						"media",
						"rate",
						"movie",
						"Q"
					],
					"query": [
						{
							"key": "rating",
							"value": "10"
						}
					]
				}
			},
			"response": []
		},
		{
			"name": "Deletando avaliação de um filme",
			"event": [
				{
					"listen": "test",
					"script": {
						"exec": [
							"// Testa se o status da resposta é 200\r",
							"pm.test(\"Status deve ser 200\", function() {\r",
							"    pm.response.to.have.status(200);\r",
							"});\r",
							"\r",
							"// Testa se a resposta é um JSON\r",
							"pm.test(\"Resposta deve ser JSON\", function() {\r",
							"    pm.response.to.be.json;\r",
							"});\r",
							"\r",
							"// Testa se a mensagem retornada está correta\r",
							"pm.test(\"Mensagem correta\", function() {\r",
							"    var jsonData = pm.response.json();\r",
							"    pm.expect(jsonData.message).to.eql(\"Movie removido do banco de dados\");\r",
							"});"
						],
						"type": "text/javascript",
						"packages": {}
					}
				}
			],
			"request": {
				"method": "DELETE",
				"header": [],
				"url": "http://localhost:8000/media/rate/movie/99/"
			},
			"response": []
		},
		{
			"name": "Deletando avaliação inexistente",
			"event": [
				{
					"listen": "test",
					"script": {
						"exec": [
							"pm.test(\"Status code deve ser 404 (Not Found)\", function () {\r",
							"    pm.response.to.have.status(404);\r",
							"});\r",
							"\r",
							"pm.test(\"Resposta contém detalhe do erro\", function () {\r",
							"    var jsonData = pm.response.json();\r",
							"    pm.expect(jsonData).to.have.property(\"detail\");\r",
							"    pm.expect(jsonData.detail).to.eql(\"Movie não encontrado no banco de dados\");\r",
							"});"
						],
						"type": "text/javascript",
						"packages": {}
					}
				}
			],
			"request": {
				"method": "DELETE",
				"header": [],
				"url": "http://localhost:8000/media/rate/movie/99/"
			},
			"response": []
		},
		{
			"name": "Deletando filme com ID inválida",
			"event": [
				{
					"listen": "test",
					"script": {
						"exec": [
							"pm.test(\"Status code deve ser 422 (Unprocessable Entity)\", function () {\r",
							"    pm.response.to.have.status(422);\r",
							"});\r",
							"\r",
							"pm.test(\"Resposta contém detalhe de erro de parsing\", function () {\r",
							"    var jsonData = pm.response.json();\r",
							"\r",
							"    pm.expect(jsonData).to.have.property(\"detail\");\r",
							"    pm.expect(jsonData.detail[0]).to.have.property(\"type\", \"int_parsing\");\r",
							"    pm.expect(jsonData.detail[0]).to.have.property(\"loc\");\r",
							"    pm.expect(jsonData.detail[0].loc).to.include(\"path\");\r",
							"    pm.expect(jsonData.detail[0].loc).to.include(\"media_id\");\r",
							"    pm.expect(jsonData.detail[0]).to.have.property(\"msg\", \"Input should be a valid integer, unable to parse string as an integer\");\r",
							"    pm.expect(jsonData.detail[0]).to.have.property(\"input\", \"Q\");\r",
							"});\r",
							""
						],
						"type": "text/javascript",
						"packages": {}
					}
				}
			],
			"request": {
				"method": "DELETE",
				"header": [],
				"url": "http://localhost:8000/media/rate/movie/Q/"
			},
			"response": []
		}
	]
}